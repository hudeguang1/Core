
#![no_std]
#![no_main]

#[macro_use]
extern crate user_lib;
extern crate alloc;

use alloc::string::String;
use user_lib::{
    sys_open,
    sys_close,
    sys_write,
    sys_read,
};

#[no_mangle]
pub fn main() -> i32 {
    let fd = sys_open("hello", 0);
    let mut buffer: [u8; 32] = [0; 32];
    sys_read(fd as usize, &mut buffer);
    let mut res = String::new();
    for ch in buffer.iter() {
        res.push(*ch as char);
    }
    println!("{}", res);
    sys_close(fd as usize);
    0
}